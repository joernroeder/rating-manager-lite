function elm_rml_process(e,a,r){a.svg_source=e,jQuery(".elm-rating").UR(a).one("ultimateratings.set",function(e,u){var t=this,n=u,F=jQuery(t).attr("class").split(" ")[1],u={action:"elm_process_rating",post_id:F,value:u.rating,nonce:r};jQuery(t).parent().parent().find(".elm-feedback").show(),jQuery(t).parent().parent().parent().find(".feedback-form").append('<input type="hidden" name="feedback_rating_value" class="feedback-rating-value" value="'+n.rating+'" />'),jQuery(t).parent().parent().find(".elm-rating").html('<div class="elm-loading"></div>'),jQuery.post(ajaxurl,u,function(e){jQuery(t).parent().parent().find(".elm-rating").html('<div class="elm-rating-readonly" data-elm-value="'+e.avg+'" data-elm-readonly="true"></div>'),jQuery(t).parent().parent().find(".elm-rating-readonly").UR(a),jQuery(t).parent().find(".jq-ry-container").css("cursor","default"),jQuery(t).parent().parent().find(".elm-rating-stats").html(e.avg),e.thankyou_msg&&jQuery(t).parent().parent().find(".elm-thankyou-msg").html(e.thankyou_msg).fadeOut(3e3)},"json"),jQuery(this).unbind()})}function elm_ultimate_ratings(e,a,r){var u=new XMLHttpRequest;u.open("GET",e,!0),u.onload=function(e){4===u.readyState&&(200===u.status?(svg_source=u.responseText,elm_ultimate_ratings_callback(svg_source,a,r)):console.error(u.statusText))},u.onerror=function(e){console.error(u.statusText)},u.send(null)}function elm_rml_display(e,a){a.svg_source=e,jQuery(".elm-rating-readonly").each(function(){jQuery(this).UR(a)})}function elm_ultimate_ratings_callback(e,a,r){elm_rml_display(e,a),elm_rml_process(e,a,r)}function elm_isValidEmailAddress(e){var a=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);return a.test(e)}jQuery(document).ready(function(e){var a=jQuery(".feedback-wrapper").length;a&&(jQuery(".feedback-wrapper").hide(),jQuery(".elm-feedback").hide(),jQuery(".elm-leave-your-feedback").click(function(){jQuery(this).parent().find(".feedback-wrapper").toggle()})),jQuery(".send-feedback").click(function(){var e=jQuery(this).parent().find(".feedback-name").val(),a=jQuery(this).parent().find(".feedback-email").val(),r=jQuery(this).parent().find(".feedback-message").val(),u=jQuery(this).parent().find(".feedback-post-id").val(),t=jQuery(this).parent().find(".feedback-rating-value").val(),n=jQuery(this).parent().find(".feedback-nonce").val(),F=jQuery(this).parent().find(".feedback-captcha").val(),i=new Array,s=this;if(r||i.push(feedback_texts.feedback_required),e||i.push(feedback_texts.name_required),a||i.push(feedback_texts.email_required),a&&!elm_isValidEmailAddress(a)&&i.push(feedback_texts.wrong_email),0!==i.length){var d=i.toString(),d=d.replace(/,/g,"<br />");jQuery(this).parent().parent().find(".feedback-errors").html(d),jQuery(this).parent().parent().find(".feedback-errors").css("float","left")}else{jQuery(this).parent().parent().find(".feedback-errors").hide();var l={action:"elm_process_feedback",post_id:u,message:r,name:e,email:a,rating:t,nonce:n,captcha:F};jQuery.post(ajaxurl,l,function(e){jQuery(s).parent().parent().parent().parent().find(".elm-leave-your-feedback").hide(),jQuery(s).parent().parent().parent().parent().find(".feedback-wrapper").html(e.message).fadeOut(3e3)},"json")}})});